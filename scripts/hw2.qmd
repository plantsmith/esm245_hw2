---
title: "Differences-in-Differences Causal Analysis of a Fishery Management Reform in Peru"
author: "Natalie Smith"
date: "10/10/2021"
format: 
  html:
    code-fold: true
    toc: true
    number-sections: true
    embed-resources: true
theme: Litera
editor: visual
execute:
  echo: true
  message: false
  warning: false
---

# Background

In 2009, the Individual Vessel Quota (IVQ) system was implemented for Peruvian anchoveta fisheries in the North-Central zone to enhance stock monitoring, alleviate fishing pressure, and incentivize sustainable practices. This policy allocated each vessel a percentage of the Total Allowable Catch (TAC) based on its historical performance, while also varying seasonally based on biological, weather, and climate variables. Additionally, the system introduced several additional measures, including a seasonal tax on harvested tons, satellite surveillance for better compliance, and designated docks to weight the landing.

We aim to assess whether the IVQ had a causal effect on harvest levels, using the South zone, which was not subject to policy, as a counterfactual. Through a differences-in-differences (DiD) analysis, we will compare the North-Central zone (affected by the IVQ) and the South zone (unaffected) before and after the policy's implementation. This approach will help us determine whether the IVQ resulted in changes in fishery landings while accounting for external factors influencing both zones.

![Figure 1: Arias Schreiber and Halliday, 2013](images/anchovy_map.png){fig-align="left" width="384"}

# Prepare data and packages

```{r}
library(tidyverse)
library(knitr)
library(here)
library(kableExtra)
```

```{r}
# Load the data using here package
anchovy_data <- read_csv(here("data", "df_peru.csv"))
```

# Employ Diff-in-Diff Analysis

We first created a new variable called 'log_landing' by taking the logarithm of the 'landing' variable. Then, we created two dummy variables: one named 'post' to indicate when the treatment began (1 for 2009 and after, 0 for before), and another variable called 'north' to identify the group exposed to the treatment (1 for NC and 0 for S). Next, we created an interaction between these variables called 'did' (differences-in-differences). This interaction variable is equal to 1 only for observations that are both in the treatment group and occur after the treatment started. Finally, we performed a linear regression based on the functional form below:

$$
Landing_{tg} = \alpha + \beta_0 North_{g} + \beta_1Post_{t} + \beta_3North_{g}Post_{t} + \epsilon_{tg}
$$

```{r}
#Create a new variable called log_landing by taking the log of the landings variable
log_anchovy_data <- anchovy_data %>%
  mutate(log_landing = log(landing))

#Create a dummy variable called 'post' to indicate when the treatment started (year 2009)
log_anchovy_data <- log_anchovy_data %>%
  mutate(post = ifelse(year >= 2009, 1, 0))

#Create a dummy variable called 'north' to identify the group (zone) exposed to the treatment (CN)
log_anchovy_data <- log_anchovy_data %>% 
  mutate(north = ifelse(zone=="CN", 1, 0))

#Create the interaction between the time the treatment started and the treatment group
log_anchovy_data <- log_anchovy_data %>% 
  mutate(did = post*north)

#Run a linear regression using the functional form proposed above
lm_anchovy <- lm(log_landing ~ north + post + did, data = log_anchovy_data)
```

```{r}
kable(summary(lm_anchovy)$coefficients, digits = 3, 
      col.names = c("Estimate", "Std. Error", "T-value", "Pr(>|t|)"), # Rename columns
      caption = "Linear Model Coefficients for Anchovy Landings")
```

# Intrepretation of the DID Coefficients

Interpret the did coefficient. Remember that we transformed landing by using log. This is your main result, so take a minute to really think about what this estimated coefficient is telling you.

FYI: Fish landings are the total weight or number of marine species that are caught, brought to shore, and sold or transferred to another party.

# Analysis
